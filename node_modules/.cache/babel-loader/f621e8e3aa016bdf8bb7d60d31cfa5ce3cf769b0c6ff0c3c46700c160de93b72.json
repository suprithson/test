{"ast":null,"code":"var _jsxFileName = \"/Users/hey/Downloads/shop641/src/views/Home.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { app } from '../config/firebase';\nimport { getDatabase, ref, onValue } from 'firebase/database';\nimport { tables } from '../config/tables';\nimport { Context } from '../config/Provider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n  const state = useContext(Context);\n  const [products, setProducts] = useState([]);\n  const [allProd, setAllProd] = useState([]);\n\n  // Firebase\n  const db = getDatabase(app);\n  const dbref = ref(db, tables.products);\n  useEffect(() => {\n    onValue(dbref, snapshot => {\n      if (snapshot.exists()) {\n        const data = snapshot.val();\n        const arr = [];\n        const keys = Object.keys(data);\n        keys.forEach(key => arr.push({\n          ...data[key],\n          id: key\n        }));\n        setProducts(arr);\n        setAllProd(arr);\n      } else {\n        setProducts([]);\n      }\n    });\n  }, []);\n  const add = item => {\n    if (state.cartNo === 0) {\n      const c = [{\n        ...item,\n        qty: 1\n      }];\n      state.pushCart(c);\n      localStorage.setItem('cart', JSON.stringify(c));\n    } else {\n      const findItem = state.cart.find(el => el.id === item.id);\n      if (findItem) {\n        const c = [...state.cart];\n        const newC = c.map(el => {\n          if (el.id === item.id) {\n            el['qty'] = el['qty'] + 1;\n          }\n          return el;\n        });\n        state.pushCart(newC);\n        localStorage.setItem('cart', JSON.stringify(newC));\n      } else {\n        const c = [...state.cart, {\n          ...item,\n          qty: 1\n        }];\n        state.pushCart(c);\n        localStorage.setItem('cart', JSON.stringify(c));\n      }\n    }\n  };\n  const prod_list = products.length > 0 ? products.map((item, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-2 col-lx-3 col-l-4 col-m-6 col-s-6 padding-all-10\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"prod-image\",\n      style: {\n        backgroundImage: `url(${item.img})`\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: item.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"$\", item.price.toFixed(2)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"add\",\n        onClick: () => add(item),\n        children: \"Add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 18\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this)]\n  }, index, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-12 padding-all-10\",\n    children: \"No product available for display\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 10\n  }, this);\n  const filter = text => {\n    if (text === '') {\n      setProducts(allProd);\n      return;\n    }\n    const arr = [];\n    products.forEach(item => {\n      if (item.name.toLowerCase().indexOf(text.toLowerCase()) > -1) {\n        arr.push(item);\n      }\n    });\n    setProducts(arr);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navy-blue-bg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-row-reverse width-95 margin-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"width-30 width-l-45 width-m-60 width-s-70\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Search for a product\",\n            onChange: e => filter(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"width-95 margin-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: prod_list\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n_s(Home, \"zMW7xKdjvKLwRHMJ48OAs3NCxgg=\");\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","useContext","app","getDatabase","ref","onValue","tables","Context","jsxDEV","_jsxDEV","Home","_s","state","products","setProducts","allProd","setAllProd","db","dbref","snapshot","exists","data","val","arr","keys","Object","forEach","key","push","id","add","item","cartNo","c","qty","pushCart","localStorage","setItem","JSON","stringify","findItem","cart","find","el","newC","map","prod_list","length","index","className","children","style","backgroundImage","img","fileName","_jsxFileName","lineNumber","columnNumber","name","price","toFixed","onClick","filter","text","toLowerCase","indexOf","placeholder","onChange","e","target","value","_c","$RefreshReg$"],"sources":["/Users/hey/Downloads/shop641/src/views/Home.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\r\n\r\nimport { app } from '../config/firebase'\r\nimport {getDatabase, ref, onValue} from 'firebase/database'\r\nimport { tables } from '../config/tables'\r\nimport { Context } from '../config/Provider'\r\n\r\nexport default function Home() {\r\n    const state = useContext(Context)\r\n    const [products, setProducts] = useState([])\r\n    const [allProd, setAllProd] = useState([])\r\n\r\n    // Firebase\r\n    const db = getDatabase(app)\r\n    const dbref = ref(db, tables.products)\r\n\r\n    useEffect(()=>{\r\n        onValue(dbref, snapshot=>{\r\n            if(snapshot.exists()){\r\n                const data = snapshot.val()\r\n                const arr = []\r\n                const keys = Object.keys(data)\r\n                keys.forEach(key=> arr.push({...data[key], id: key}))\r\n                setProducts(arr)\r\n                setAllProd(arr)\r\n            }else{\r\n                setProducts([])\r\n            }\r\n        })\r\n    }, [])\r\n\r\n    const add = item => {\r\n        if(state.cartNo === 0){\r\n            const c = [{...item, qty: 1}]\r\n            state.pushCart(c)\r\n            localStorage.setItem('cart', JSON.stringify(c))\r\n        }else{\r\n            const findItem = state.cart.find(el=>el.id === item.id)\r\n            if(findItem){\r\n                const c = [...state.cart]\r\n                const newC = c.map(el=>{\r\n                    if(el.id === item.id){\r\n                        el['qty'] = el['qty'] + 1\r\n                    }\r\n                    return el\r\n                })\r\n                state.pushCart(newC)\r\n                localStorage.setItem('cart', JSON.stringify(newC))\r\n            }else{\r\n                const c = [...state.cart, {...item, qty: 1}]\r\n                state.pushCart(c)\r\n                localStorage.setItem('cart', JSON.stringify(c))\r\n            }\r\n        }\r\n    }\r\n\r\n    const prod_list = products.length > 0 ? products.map((item, index)=>(\r\n        <div className=\"col-2 col-lx-3 col-l-4 col-m-6 col-s-6 padding-all-10\" key={index}>\r\n            {/* <div><img src={item.img} className=\"imgProd\" alt=\"\" /></div> */}\r\n            <div className=\"prod-image\" style={{ backgroundImage: `url(${item.img})` }} />\r\n            <div>{item.name}</div>\r\n            <div>${item.price.toFixed(2)}</div>\r\n            <div><button className=\"add\" onClick={()=>add(item)}>Add</button></div>\r\n        </div>\r\n    )) : <div className=\"col-12 padding-all-10\">No product available for display</div>\r\n\r\n    const filter = text => {\r\n        if(text === ''){\r\n            setProducts(allProd)\r\n            return\r\n        }\r\n\r\n        const arr = []\r\n        products.forEach(item=>{\r\n            if(item.name.toLowerCase().indexOf(text.toLowerCase()) > -1){\r\n                arr.push(item)\r\n            }\r\n        })\r\n        setProducts(arr)\r\n    }\r\n\r\n  return (\r\n    <div>\r\n        <div className=\"navy-blue-bg\">\r\n            <div className=\"flex-row-reverse width-95 margin-auto\">\r\n                <div className=\"width-30 width-l-45 width-m-60 width-s-70\">\r\n                    <input placeholder=\"Search for a product\" onChange={(e)=>filter(e.target.value)} />\r\n                </div>\r\n            </div>\r\n            <br />\r\n        </div>\r\n        <br />\r\n        <div className=\"width-95 margin-auto\">\r\n            <div className=\"row\">{prod_list}</div>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}